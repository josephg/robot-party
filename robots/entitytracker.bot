@robot 'entitytracker',
  local: true

#entities = {}


@transmit "handling display for type", "list robots"
@transmit "handling display for type", "I have robots"

@listen "who reply", ({from, data: {name, hub}}) ->
  @transmit "list entities", [{name, id: from, hub, info:{}}]

@listen "I have robots", ({from, data: robots}) ->
  robot.hub = from for robot in robots
  @transmit "list entities", robots

setTimeout =>
  @transmit type:"who", local:false
  @transmit type:"list robots", local:false
, 200
