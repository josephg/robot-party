coffeescript = require 'coffee-script'


@listen "run robot", ({data: {name: roboname, code: robocode}}) ->

  robofun = eval "(function(){" + coffeescript.compile(robocode, bare: true) + "})"
  robots[roboname] = new Robot(robofun)
  @transmit type: "robot added", data: {name: roboname}    
