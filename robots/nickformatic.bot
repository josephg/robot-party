@robot "nickformatic"
  local: true

me = undefined

@listen "user nickname", ({local, user: oldname, data: newname}) ->
  if local
    me = newname
  else
    if me == oldname
      text = "* your nick is now #{newname}"
    else
      text = "* #{oldname or 'anonymous'} is now #{newname}"

    @transmit "build message", textclass: "status", text: text

@transmit "handling display for type", "user nickname"