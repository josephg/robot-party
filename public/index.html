<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.6.2/coffee-script.min.js"></script>

    <!-- these scripts should all be in robots somehow -->
    <script src="/js/sha256.js"></script>
    <script src="/js/crypto.js"></script>
    <script src="/js/rsa-pem.js"></script>

    <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>

    <script src="/js/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/theme-textmate.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/mode-coffee.js" type="text/javascript" charset="utf-8"></script>

    <script src="/js/upgradeneeded.js"></script>
    <script src="/js/indexedup.min.js"></script>

    <script type="text/coffeescript" src="Robot.coffee"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all">
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>    
    <title>ROBOT PARTY!</title>
  </head>
  <body>
    <script type="text/coffeescript">
      levelup = window.indexedup

      levelup './robots', createIfMissing: true, (err, db) ->
        throw err if err
        db.get "robot_client_current", (err, data) =>
          if err
            $.ajax "robots/client.bot", success: woot
          else
            woot JSON.parse(data).code

      woot = (code) ->
        robot = new Robot code

    </script>
  </body>
</html>
