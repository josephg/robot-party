<html>
  <head>
    <script src="http://jashkenas.github.com/coffee-script/extras/coffee-script.js"></script>
    <script src="http://localhost:4321/socket.io/socket.io.js"></script>
    <script type="text/coffeescript" src="Robot.coffee"></script>
    <script type="text/coffeescript" src="Hub.coffee"></script>
  </head>
  <body>
    <script type="text/coffeescript">
      # Client-side code

      party = io.connect 'http://localhost:4321'

      hub = new Hub
      
      hub.add ->
        @listen (data) ->
          console.log "awesomebot got", data
          alert "got " + JSON.stringify(data)

      hub.add ->
        party.on 'message', (msg) -> @sendRaw msg if message?
        @listen (msg) -> party.json.emit msg

    </script>


    <a href="#" onclick="awesomebot.message">Click here to send a message</a>
  </body>
</html>